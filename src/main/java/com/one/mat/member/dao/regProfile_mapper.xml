<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
   "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="com.one.mat.member.dao.RegProfileDAO">

	<insert id="chattingcompSave"
		parameterType="com.one.mat.admin.dto.CompDTO">
		INSERT INTO
		comp(comp_memberIdx,compType_code,comp_loc,comp_idfNum,comp_content,comp_receiveDate,comp_reportIdx)
		VALUES(#{member_idx},#{compType_code},3,#{comp_idfNum},#{comp_content},(select
		DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s')),#{comp_reportIdx});
	</insert>

	<insert id="compPhoto" parameterType="String">
		insert into photo(photo_type,photo_idfNum,photo_fileName,photo_uploadDate)
		value(3,(select max(comp_idx) from comp),#{photo},(select
		DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s')));
	</insert>

	<insert id="boardcompSave"
		parameterType="com.one.mat.admin.dto.CompDTO">
		INSERT INTO
		comp(comp_memberIdx,compType_code,comp_loc,comp_idfNum,comp_content,comp_receiveDate,comp_reportIdx)
		VALUES(#{member_idx},#{compType_code},1,#{board_id},#{comp_content},(select
		DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s')),(SELECT member_idx FROM board
		WHERE board_id = #{board_id}));
	</insert>

	<insert id="commentcompSave"
		parameterType="com.one.mat.admin.dto.CompDTO">
		INSERT INTO
		comp(comp_memberIdx,compType_code,comp_loc,comp_idfNum,comp_content,comp_receiveDate,comp_reportIdx)
		VALUES(#{member_idx},#{compType_code},2,#{reply_id},#{comp_content},(select
		DATE_FORMAT(now(),'%Y-%m-%d %H:%i:%s')),(SELECT member_idx FROM reply
		WHERE reply_id = #{reply_id}));
	</insert>

	<select id="compList" resultType="com.one.mat.admin.dto.CompDTO">
		SELECT compType_code,compType FROM comptype;
	</select>

	<insert id="historySave" parameterType="int">
		INSERT INTO comphistory (admin_memberIdx, comp_idx, comp_handleContent,
		comp_handleState, comp_blindStete, member_loginLock)
		VALUES (#{memberIdx}, (SELECT MAX(comp_idx) FROM comp), NULL,'Null', 'N',
		'N');
	</insert>

	<select id="memberDetail"
		resultType="com.one.mat.member.dto.MemberDTO">
		SELECT member.member_gender, member.member_dongAddr, member.member_nickName
		FROM member
		JOIN pro ON member.member_idx = pro.member_idx
		WHERE pro.pro_idx = 13;
	</select>
	<select id="charlist"
		resultType="com.one.mat.member.dto.ProfileDTO">
		SELECT chartype.charType
		FROM `char`
		JOIN chartype ON `char`.charType_code = chartype.charType_code
		WHERE `char`.pro_idx = 13;
	</select>
	<select id="memberDetailListPhoto"
		resultType="com.one.mat.member.dto.PhotoDTO">
		select photo_fileName from photo p where photo_idfNum = 61;
	</select>
	<select id="proDetail"
		resultType="com.one.mat.member.dto.ProfileDTO">
		SELECT
		pro.pro_dogName,
		pro.pro_dogAge,
		pro.pro_dogGender,
		pro.pro_dogDesc,
		pro.pro_dogScore,
		breedType.breedType
		FROM pro
		LEFT JOIN breed ON pro.pro_idx = breed.pro_idx
		LEFT JOIN breedType ON breed.breedType_code = breedType.breedType_code
		WHERE pro.pro_idx = 13;
	</select>

	






</mapper>